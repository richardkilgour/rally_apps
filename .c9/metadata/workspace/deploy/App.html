{"filter":false,"title":"App.html","tooltip":"/deploy/App.html","undoManager":{"mark":14,"position":14,"stack":[[{"group":"doc","deltas":[{"start":{"row":9,"column":82},"end":{"row":9,"column":331},"action":"remove","lines":["launch:function(){this.featureCardBoard=this.add({xtype:\"rallycardboard\",types:[\"portfolioItem/Feature\"],attribute:\"Release\",cardConfig:{xtype:\"rallycard\",fields:[\"Name\"]},storeConfig:{filters:[{property:\"Release.Name\",operator:\"!=\",value:\"None\"}]}}"]},{"start":{"row":9,"column":82},"end":{"row":9,"column":2514},"action":"insert","lines":["items:{html:'<a href=\"https://help.rallydev.com/apps/2.0rc2/doc/\">App SDK 2.0rc2 Docs</a>'},_releasesWithFeatures:[],_uniqueColumns:[],_additionalColumns:[],_updatedColumns:[],_cardBoard:null,launch:function(){var that=this;this._releasePicker=Ext.create(\"Rally.ui.picker.MultiObjectPicker\",{fieldLabel:\"Choose a Release\",modelType:\"Release\"}),this.add(this._releasePicker),this.add({xtype:\"rallybutton\",id:\"getReleases\",text:\"Add Selected Releases\",handler:function(){that._getSelectedReleases()}}),Ext.create(\"Rally.data.WsapiDataStore\",{model:\"PortfolioItem/Feature\",fetch:[\"FormattedID\",\"Name\",\"Release\"],pageSize:100,autoLoad:!0,filters:[{property:\"Release\",operator:\"!=\",value:null}],listeners:{load:this._onScheduledFeaturesLoaded,scope:this}})},_onScheduledFeaturesLoaded:function(store,data){var that=this;0!==data.length?(_.each(data,function(feature){console.log(\"feature \",feature.get(\"FormattedID\"),\"scheduled for \",feature.get(\"Release\")._refObjectName,feature.get(\"Release\")._ref),that._releasesWithFeatures.push(feature.get(\"Release\"))}),that._makeBoard()):console.log(\"there are no features scheduled for a release\")},_makeBoard:function(){this._cardBoard&&this._cardBoard.destroy();var columns=[];_.each(this._releasesWithFeatures,function(rel){columns.push({value:rel._ref,columnHeaderConfig:{headerTpl:\"{release}\",headerData:{release:rel._refObjectName}}})}),this._uniqueColumns=_.uniq(columns,\"value\");var cardBoard={xtype:\"rallycardboard\",itemId:\"piboard\",types:[\"PortfolioItem/Feature\"],attribute:\"Release\",fieldToDisplay:\"Release\",columns:this._uniqueColumns};this._cardBoard=this.add(cardBoard)},_getSelectedReleases:function(){var that=this,expandedColumns=[],selectedReleases=this._releasePicker._getRecordValue();console.log(selectedReleases.length),selectedReleases.length>0&&_.each(selectedReleases,function(rel){var releaseName=rel.get(\"Name\"),releaseRef=rel.get(\"_ref\");that._additionalColumns.push({value:releaseRef,columnHeaderConfig:{headerTpl:\"{release}\",headerData:{release:releaseName}}})}),expandedColumns=_.union(that._uniqueColumns,that._additionalColumns),this._updatedColumns=_.uniq(expandedColumns,\"value\"),this._updateBoard()},_updateBoard:function(){var that=this;this._cardBoard&&this._cardBoard.destroy();var cardBoard={xtype:\"rallycardboard\",types:[\"PortfolioItem/Feature\"],attribute:\"Release\",fieldToDisplay:\"Release\",columns:that._updatedColumns};this._cardBoard=this.add(cardBoard"]},{"start":{"row":5,"column":51},"end":{"row":5,"column":52},"action":"remove","lines":["3"]},{"start":{"row":5,"column":51},"end":{"row":5,"column":52},"action":"insert","lines":["2"]},{"start":{"row":5,"column":51},"end":{"row":5,"column":52},"action":"remove","lines":["2"]},{"start":{"row":5,"column":51},"end":{"row":5,"column":52},"action":"insert","lines":["3"]},{"start":{"row":9,"column":770},"end":{"row":9,"column":816},"action":"insert","lines":[",{property:\"State\",operator:\"!=\",value:\"Done\"}"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":423},"end":{"row":9,"column":493},"action":"insert","lines":[",filters:[{property:\"Project\",operator:\"=\",value:\"Speech Technology\"}]"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":424},"end":{"row":9,"column":437},"action":"insert","lines":["storeConfig:{"]},{"start":{"row":9,"column":466},"end":{"row":9,"column":479},"action":"remove","lines":["operator:\"=\","]},{"start":{"row":9,"column":494},"end":{"row":9,"column":495},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":464},"end":{"row":9,"column":469},"action":"insert","lines":[".Name"]},{"start":{"row":9,"column":676},"end":{"row":9,"column":978},"action":"insert","lines":["ui.dialog.SolrArtifactChooserDialog\",{artifactTypes:[\"Release\"],autoShow:!0,listeners:{artifactChosen:function(selectedRecord){Ext.Msg.alert(\"Chooser\",selectedRecord.get(\"Name\")+\" was chosen\")},scope:this},storeConfig:{filters:[{property:\"Project.Name\",value:\"Speech Technology\"}]}}),Ext.create(\"Rally."]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":752},"end":{"row":9,"column":764},"action":"insert","lines":["multiple:!0,"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":658},"end":{"row":9,"column":678},"action":"insert","lines":["this._releasePicker="]},{"start":{"row":9,"column":810},"end":{"row":9,"column":901},"action":"remove","lines":["function(selectedRecord){Ext.Msg.alert(\"Chooser\",selectedRecord.get(\"Name\")+\" was chosen\")}"]},{"start":{"row":9,"column":810},"end":{"row":9,"column":850},"action":"insert","lines":["this._onSelectedReleases(selectedRecord)"]},{"start":{"row":9,"column":2109},"end":{"row":9,"column":2112},"action":"remove","lines":["get"]},{"start":{"row":9,"column":2109},"end":{"row":9,"column":2111},"action":"insert","lines":["on"]},{"start":{"row":9,"column":2137},"end":{"row":9,"column":2153},"action":"insert","lines":["selectedReleases"]},{"start":{"row":9,"column":2187},"end":{"row":9,"column":2242},"action":"remove","lines":[",selectedReleases=this._releasePicker._getRecordValue()"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":810},"end":{"row":9,"column":836},"action":"insert","lines":["function(selectedRecords){"]},{"start":{"row":9,"column":875},"end":{"row":9,"column":876},"action":"remove","lines":[")"]},{"start":{"row":9,"column":875},"end":{"row":9,"column":878},"action":"insert","lines":["s)}"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":2216},"end":{"row":9,"column":2241},"action":"insert","lines":["null!=selectedReleases&&("]},{"start":{"row":9,"column":2343},"end":{"row":9,"column":2372},"action":"insert","lines":["console.log(rel.get(\"Name\"));"]},{"start":{"row":9,"column":2699},"end":{"row":9,"column":2700},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":2222},"end":{"row":9,"column":2223},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":347},"end":{"row":9,"column":699},"action":"remove","lines":["picker.MultiObjectPicker\",{fieldLabel:\"Choose a Release\",modelType:\"Release\",storeConfig:{filters:[{property:\"Project.Name\",value:\"Speech Technology\"}]}}),this.add(this._releasePicker),this.add({xtype:\"rallybutton\",id:\"getReleases\",text:\"Add Selected Releases\",handler:function(){that._getSelectedReleases()}}),this._releasePicker=Ext.create(\"Rally.ui."]},{"start":{"row":9,"column":617},"end":{"row":9,"column":742},"action":"insert","lines":["this.add({xtype:\"rallybutton\",id:\"getReleases\",text:\"Add Selected Releases\",handler:function(){this._releasePicker.show()}}),"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":622},"end":{"row":9,"column":626},"action":"remove","lines":["add("]},{"start":{"row":9,"column":622},"end":{"row":9,"column":663},"action":"insert","lines":["_selectButton=Ext.create(\"Ext.Container\","]},{"start":{"row":9,"column":707},"end":{"row":9,"column":710},"action":"remove","lines":["Add"]},{"start":{"row":9,"column":707},"end":{"row":9,"column":713},"action":"insert","lines":["Choose"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":779},"end":{"row":9,"column":806},"action":"insert","lines":[",renderTo:Ext.getBody().dom"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":2056},"end":{"row":9,"column":2086},"action":"insert","lines":["console.log(selectedReleases),"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":617},"end":{"row":9,"column":636},"action":"remove","lines":["this._selectButton="]},{"start":{"row":9,"column":2067},"end":{"row":9,"column":2071},"action":"remove","lines":["null"]},{"start":{"row":9,"column":2067},"end":{"row":9,"column":2073},"action":"insert","lines":["void 0"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":82},"end":{"row":9,"column":174},"action":"remove","lines":["items:{html:'<a href=\"https://help.rallydev.com/apps/2.0rc2/doc/\">App SDK 2.0rc2 Docs</a>'},"]},{"start":{"row":9,"column":375},"end":{"row":9,"column":378},"action":"insert","lines":["me,"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":27,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":0},"timestamp":1420626651349,"hash":"d7e502cc7a5fcbe1d13b40c7a9f265a1de1e7dd2"}